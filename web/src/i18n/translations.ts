export const supportedLocales = ['zh', 'en'] as const

export type Locale = (typeof supportedLocales)[number]
export type TranslationValues = Record<string, string | number>

const baseTranslations = {
  en: {
    'app.nav.dashboard': 'Dashboard',
    'app.nav.stats': 'Statistics',
    'app.nav.live': 'Live',
    'app.nav.settings': 'Settings',
    'app.brand': 'Codex Vibe Monitor',
    'app.logoAlt': 'Codex Vibe Monitor icon',
    'app.language.label': 'Language',
    'app.language.option.en': 'English',
    'app.language.option.zh': '中文',
    'app.language.switcherAria': 'Change language',
    'app.theme.switcherAria': 'Switch color theme',
    'app.theme.currentLight': 'Light',
    'app.theme.currentDark': 'Dark',
    'app.theme.switchToLight': 'Switch to light mode',
    'app.theme.switchToDark': 'Switch to dark mode',
    'app.proxySettings.button': 'Proxy settings',
    'app.proxySettings.title': 'Model list hijack',
    'app.proxySettings.description': 'Control how /v1/models is exposed by the reverse proxy.',
    'app.proxySettings.loading': 'Loading settings…',
    'app.proxySettings.loadError': 'Failed to load settings: {{error}}',
    'app.proxySettings.saveError': 'Failed to save settings: {{error}}',
    'app.proxySettings.hijackLabel': 'Hijack /v1/models',
    'app.proxySettings.hijackHint': 'Return preset models from this proxy instead of pure upstream passthrough.',
    'app.proxySettings.mergeLabel': 'Merge upstream models in real time',
    'app.proxySettings.mergeHint': 'When enabled, merge upstream models with presets and deduplicate by model id.',
    'app.proxySettings.mergeDisabledHint': 'Enable hijack first to turn this option on.',
    'app.proxySettings.presetModels': 'Preset model list',
    'app.proxySettings.enabledCount': 'Enabled: {{count}} / {{total}}',
    'app.proxySettings.noneEnabledHint': 'No preset model enabled. When hijack is on, no extra preset model is inserted.',
    'app.proxySettings.modelEnabledBadge': 'Enabled',
    'app.proxySettings.modelDisabledBadge': 'Disabled',
    'app.proxySettings.defaultOff': 'Default: off',
    'app.proxySettings.saving': 'Saving…',
    'app.proxySettings.close': 'Close',
    'app.update.available': 'A new version is available:',
    'app.update.current': 'current',
    'app.update.refresh': 'Refresh now',
    'app.update.later': 'Later',
    'app.sse.banner.title': 'Live connection lost',
    'app.sse.banner.description': 'No server events have arrived for over two minutes.',
    'app.sse.banner.duration': 'Offline for {{minutes}}m {{seconds}}s',
    'app.sse.banner.durationChip': 'Offline {{minutes}}m {{seconds}}s',
    'app.sse.banner.retryIn': 'Auto reconnect in {{seconds}}s',
    'app.sse.banner.retryingNow': 'Retrying now…',
    'app.sse.banner.autoDisabled': 'Auto reconnect paused after extended downtime. Click to try again.',
    'app.sse.banner.reconnectButton': 'Reconnect now',
    'app.footer.githubAria': 'Open GitHub repository',
    'app.footer.loadingVersion': 'Loading version…',
    'app.footer.versionLabel': '{{scope}} {{version}}',
    'app.footer.frontendLabel': 'Front-end',
    'app.footer.backendLabel': 'Back-end',
    'app.footer.newVersionAvailable': 'Page has a newer version',
    'app.footer.copyright': '© Codex Vibe Monitor',
    'settings.title': 'Settings',
    'settings.description': 'Configure proxy behavior and pricing catalog for cost estimation.',
    'settings.loading': 'Loading settings…',
    'settings.loadError': 'Settings request failed: {{error}}',
    'settings.saving': 'Saving…',
    'settings.autoSaved': 'Auto save enabled',
    'settings.proxy.title': 'Proxy configuration',
    'settings.proxy.description': 'Control /v1/models hijack and upstream merge behavior.',
    'settings.proxy.hijackLabel': 'Hijack /v1/models',
    'settings.proxy.hijackHint': 'Return preset models from this proxy instead of pure upstream passthrough.',
    'settings.proxy.mergeLabel': 'Merge upstream models in real time',
    'settings.proxy.mergeHint': 'When enabled, merge upstream models with presets and deduplicate by model id.',
    'settings.proxy.mergeDisabledHint': 'Enable hijack first to turn this option on.',
    'settings.proxy.presetModels': 'Preset model list',
    'settings.proxy.enabledCount': 'Enabled: {{count}} / {{total}}',
    'settings.proxy.noneEnabledHint': 'No preset model enabled. Hijack mode will return no preset models.',
    'settings.pricing.title': 'Pricing configuration',
    'settings.pricing.description': 'Edit model pricing used by new request cost estimation.',
    'settings.pricing.add': 'Add model',
    'settings.pricing.remove': 'Remove',
    'settings.pricing.catalogVersion': 'Catalog version',
    'settings.pricing.columns.model': 'Model',
    'settings.pricing.columns.input': 'Input / 1M',
    'settings.pricing.columns.output': 'Output / 1M',
    'settings.pricing.columns.cacheInput': 'Cached input / 1M',
    'settings.pricing.columns.reasoning': 'Reasoning / 1M',
    'settings.pricing.columns.source': 'Source',
    'settings.pricing.columns.actions': 'Actions',
    'settings.pricing.errors.catalogVersionRequired': 'Catalog version is required.',
    'settings.pricing.errors.modelRequired': 'Model id is required.',
    'settings.pricing.errors.modelTooLong': 'Model id cannot exceed 128 characters.',
    'settings.pricing.errors.modelDuplicated': 'Model id must be unique.',
    'settings.pricing.errors.numberInvalid': 'Pricing values must be valid numbers.',
    'settings.pricing.errors.numberNegative': 'Pricing values must be non-negative.',
    'dashboard.section.summaryTitle': 'Last 24 hours summary',
    'dashboard.section.liveRefreshing': 'Live refresh',
    'dashboard.section.recentLiveTitle': 'Latest {{count}} live records',
    'dashboard.today.title': 'Today summary',
    'dashboard.today.subtitle': 'Accumulated in natural day ({{timezone}})',
    'dashboard.today.dayBadge': 'Today',
    'stats.range.lastHour': 'Past hour',
    'stats.range.today': 'Today',
    'stats.range.lastDay': 'Past day',
    'stats.range.thisWeek': 'This week',
    'stats.range.lastWeek': 'Past 7 days',
    'stats.range.thisMonth': 'This month',
    'stats.range.lastMonth': 'Past month',
    'stats.bucket.eachMinute': 'Each minute',
    'stats.bucket.each5Minutes': 'Every 5 minutes',
    'stats.bucket.each15Minutes': 'Every 15 minutes',
    'stats.bucket.each30Minutes': 'Every 30 minutes',
    'stats.bucket.eachHour': 'Each hour',
    'stats.bucket.each6Hours': 'Every 6 hours',
    'stats.bucket.each12Hours': 'Every 12 hours',
    'stats.bucket.eachDay': 'Each day',
    'stats.title': 'Statistics',
    'stats.subtitle': 'Select time range and aggregation granularity',
    'stats.settlementHour': 'Settlement hour',
    'stats.trendTitle': 'Trend',
    'stats.successFailureTitle': 'Success vs failures',
    'stats.errors.title': 'Error reasons',
    'stats.errors.scope.label': 'Failure scope',
    'stats.errors.scope.service': 'Service failures',
    'stats.errors.scope.client': 'Client failures',
    'stats.errors.scope.abort': 'Client aborts',
    'stats.errors.scope.all': 'All failures',
    'stats.errors.summary.service': 'Service',
    'stats.errors.summary.client': 'Client',
    'stats.errors.summary.abort': 'Abort',
    'stats.errors.summary.actionable': 'Actionable',
    'stats.errors.actionableRate': 'Actionable failure rate: {{rate}}',
    'quota.title': 'Quota overview',
    'quota.subscription': 'Subscription: {{name}}',
    'quota.status.active': 'Active',
    'quota.labels.usageRate': 'Usage rate',
    'quota.labels.used': 'Used',
    'quota.labels.remaining': 'Remaining quota',
    'quota.labels.nextReset': 'Next reset',
    'quota.status.expired': 'Expired',
    'quota.status.expireInDays': 'Expires in {{count}} days',
    'quota.status.expireInHours': 'Expires in {{count}} hours',
    'quota.status.expireInMinutes': 'Expires in {{count}} minutes',
    'quota.status.expireAt': 'Expires at {{time}}',
    'quota.status.expireUnknown': 'Expires at —',
    'live.summary.current': 'Current window',
    'live.summary.30m': '30 minutes',
    'live.summary.1h': '1 hour',
    'live.summary.1d': '1 day',
    'live.summary.title': 'Live summary',
    'live.chart.title': 'Live charts',
    'live.window.label': 'Window size',
    'live.option.records': '{{count}} records',
    'live.latest.title': 'Latest records',
    'metric.totalCount': 'Calls',
    'metric.totalCost': 'Cost',
    'metric.totalTokens': 'Tokens',
    'legend.low': 'Low',
    'legend.high': 'High',
    'calendar.title': 'Usage activity',
    'calendar.metricsToggleAria': 'Switch metric',
    'calendar.valueSeparator': ': ',
    'calendar.timeZoneLabel': 'Timezone',
    'calendar.weekday.sun': 'Sun',
    'calendar.weekday.mon': 'Mon',
    'calendar.weekday.tue': 'Tue',
    'calendar.weekday.wed': 'Wed',
    'calendar.weekday.thu': 'Thu',
    'calendar.weekday.fri': 'Fri',
    'calendar.weekday.sat': 'Sat',
    'calendar.monthLabel': '{{year}}/{{month}}',
    'heatmap.title': 'Last 7 days heatmap',
    'heatmap24h.title': 'Last 24h heatmap (10-min)',
    'heatmap.metricsToggleAria': 'Switch metric',
    'heatmap.noData': 'No data yet',
    'table.loadError': 'Failed to load records: {{error}}',
    'table.loadingRecordsAria': 'Loading records',
    'table.noRecords': 'No records yet.',
    'table.column.time': 'Time',
    'table.column.model': 'Model',
    'table.column.status': 'Status',
    'table.column.inputTokens': 'Input',
    'table.column.outputTokens': 'Output',
    'table.column.cacheInputTokens': 'Cached input',
    'table.column.totalTokens': 'Total tokens',
    'table.column.costUsd': 'Cost (USD)',
    'table.column.latency': 'Latency',
    'table.latency.firstByteTotal': 'First byte / Total',
    'table.column.error': 'Error',
    'table.status.success': 'Success',
    'table.status.failed': 'Failed',
    'table.status.running': 'Running',
    'table.status.pending': 'Pending',
    'table.status.unknown': 'Unknown',
    'table.detailsTitle': 'Request details',
    'table.details.invokeId': 'Invoke ID',
    'table.details.source': 'Source',
    'table.details.endpoint': 'Endpoint',
    'table.details.requesterIp': 'Requester IP',
    'table.details.codexSessionId': 'Codex Session ID',
    'table.details.failureKind': 'Failure kind',
    'table.details.timingsTitle': 'Stage timings',
    'table.details.stage.requestRead': 'Request read',
    'table.details.stage.requestParse': 'Request parse',
    'table.details.stage.upstreamConnect': 'Upstream connect',
    'table.details.stage.upstreamFirstByte': 'Upstream first byte',
    'table.details.stage.upstreamStream': 'Upstream stream',
    'table.details.stage.responseParse': 'Response parse',
    'table.details.stage.persistence': 'Persistence',
    'table.details.stage.total': 'Total',
    'table.errorDetailsTitle': 'Error details',
    'table.errorDetailsEmpty': 'No error details available.',
    'stats.cards.loadError': 'Failed to load stats: {{error}}',
    'stats.cards.totalCalls': 'Total calls',
    'stats.cards.success': 'Success',
    'stats.cards.failures': 'Failures',
    'stats.cards.totalCost': 'Total cost',
    'stats.cards.totalTokens': 'Total tokens',
    'chart.loading': 'Loading',
    'chart.loadingDetailed': 'Loading chart',
    'chart.noDataRange': 'No data for selected range.',
    'chart.noDataPoints': 'No data points yet.',
    'chart.totalTokens': 'Total tokens',
    'chart.totalCost': 'Cost (USD)',
    'chart.totalCount': 'Calls',
    'unit.calls': 'calls',
    'quota.status.expired.badge': 'Expired',
  },
  zh: {
    'app.nav.dashboard': '总览',
    'app.nav.stats': '统计',
    'app.nav.live': '实况',
    'app.nav.settings': '设置',
    'app.brand': 'Codex Vibe Monitor',
    'app.logoAlt': 'Codex Vibe Monitor 图标',
    'app.language.label': '语言',
    'app.language.option.en': 'English',
    'app.language.option.zh': '中文',
    'app.language.switcherAria': '切换语言',
    'app.theme.switcherAria': '切换配色主题',
    'app.theme.currentLight': '浅色',
    'app.theme.currentDark': '深色',
    'app.theme.switchToLight': '切换到浅色模式',
    'app.theme.switchToDark': '切换到深色模式',
    'app.proxySettings.button': '代理设置',
    'app.proxySettings.title': '模型列表劫持',
    'app.proxySettings.description': '控制反向代理对 /v1/models 的对外返回行为。',
    'app.proxySettings.loading': '正在加载设置…',
    'app.proxySettings.loadError': '加载设置失败：{{error}}',
    'app.proxySettings.saveError': '保存设置失败：{{error}}',
    'app.proxySettings.hijackLabel': '劫持 /v1/models',
    'app.proxySettings.hijackHint': '开启后由当前代理返回预置模型列表，而不是纯透传上游。',
    'app.proxySettings.mergeLabel': '实时合并上游模型',
    'app.proxySettings.mergeHint': '开启后会实时请求上游模型并与预置列表按模型 ID 去重合并。',
    'app.proxySettings.mergeDisabledHint': '请先开启劫持，再启用该选项。',
    'app.proxySettings.presetModels': '预置模型列表',
    'app.proxySettings.enabledCount': '已启用：{{count}} / {{total}}',
    'app.proxySettings.noneEnabledHint': '当前没有启用任何预置模型；开启劫持后不会额外插入预置模型。',
    'app.proxySettings.modelEnabledBadge': '已启用',
    'app.proxySettings.modelDisabledBadge': '未启用',
    'app.proxySettings.defaultOff': '默认：关闭',
    'app.proxySettings.saving': '保存中…',
    'app.proxySettings.close': '关闭',
    'app.update.available': '有新版本可用：',
    'app.update.current': '当前',
    'app.update.refresh': '立即刷新',
    'app.update.later': '稍后',
    'app.sse.banner.title': '实时连接已中断',
    'app.sse.banner.description': '已超过 2 分钟未收到服务器事件。',
    'app.sse.banner.duration': '已掉线 {{minutes}} 分 {{seconds}} 秒',
    'app.sse.banner.durationChip': '已掉线 {{minutes}}分{{seconds}}秒',
    'app.sse.banner.retryIn': '{{seconds}} 秒后自动重连',
    'app.sse.banner.retryingNow': '正在尝试重连…',
    'app.sse.banner.autoDisabled': '长时间掉线后已暂停自动重连，请手动重试。',
    'app.sse.banner.reconnectButton': '立即重连',
    'app.footer.githubAria': '打开 GitHub 仓库',
    'app.footer.loadingVersion': '版本加载中…',
    'app.footer.versionLabel': '{{scope}} {{version}}',
    'app.footer.frontendLabel': '前端',
    'app.footer.backendLabel': '后端',
    'app.footer.newVersionAvailable': '页面有新版本',
    'app.footer.copyright': '© Codex Vibe Monitor',
    'settings.title': '设置',
    'settings.description': '集中配置代理行为与价格目录，用于成本估算。',
    'settings.loading': '正在加载设置…',
    'settings.loadError': '设置请求失败：{{error}}',
    'settings.saving': '保存中…',
    'settings.autoSaved': '已启用自动保存',
    'settings.proxy.title': '代理配置',
    'settings.proxy.description': '配置 /v1/models 劫持与上游合并行为。',
    'settings.proxy.hijackLabel': '劫持 /v1/models',
    'settings.proxy.hijackHint': '开启后由当前代理返回预置模型列表，而不是纯透传上游。',
    'settings.proxy.mergeLabel': '实时合并上游模型',
    'settings.proxy.mergeHint': '开启后会实时请求上游模型并与预置列表按模型 ID 去重合并。',
    'settings.proxy.mergeDisabledHint': '请先开启劫持，再启用该选项。',
    'settings.proxy.presetModels': '预置模型列表',
    'settings.proxy.enabledCount': '已启用：{{count}} / {{total}}',
    'settings.proxy.noneEnabledHint': '当前没有启用任何预置模型；劫持模式下不会返回预置模型。',
    'settings.pricing.title': '价格配置',
    'settings.pricing.description': '编辑用于新请求成本估算的模型价格。',
    'settings.pricing.add': '新增模型',
    'settings.pricing.remove': '删除',
    'settings.pricing.catalogVersion': '价格版本',
    'settings.pricing.columns.model': '模型',
    'settings.pricing.columns.input': '输入 / 1M',
    'settings.pricing.columns.output': '输出 / 1M',
    'settings.pricing.columns.cacheInput': '缓存输入 / 1M',
    'settings.pricing.columns.reasoning': '推理 / 1M',
    'settings.pricing.columns.source': '来源',
    'settings.pricing.columns.actions': '操作',
    'settings.pricing.errors.catalogVersionRequired': '价格版本不能为空。',
    'settings.pricing.errors.modelRequired': '模型 ID 不能为空。',
    'settings.pricing.errors.modelTooLong': '模型 ID 不能超过 128 个字符。',
    'settings.pricing.errors.modelDuplicated': '模型 ID 不能重复。',
    'settings.pricing.errors.numberInvalid': '价格必须是有效数字。',
    'settings.pricing.errors.numberNegative': '价格必须为非负数。',
    'dashboard.section.summaryTitle': '最近 24 小时统计',
    'dashboard.section.liveRefreshing': '实时刷新',
    'dashboard.section.recentLiveTitle': '最近 {{count}} 条实况',
    'dashboard.today.title': '今日统计信息',
    'dashboard.today.subtitle': '按 {{timezone}} 自然日累计',
    'dashboard.today.dayBadge': '今日',
    'stats.range.lastHour': '最近 1 小时',
    'stats.range.today': '今日',
    'stats.range.lastDay': '最近 1 天',
    'stats.range.thisWeek': '本周',
    'stats.range.lastWeek': '最近 7 天',
    'stats.range.thisMonth': '本月',
    'stats.range.lastMonth': '最近 1 个月',
    'stats.bucket.eachMinute': '每分钟',
    'stats.bucket.each5Minutes': '每 5 分钟',
    'stats.bucket.each15Minutes': '每 15 分钟',
    'stats.bucket.each30Minutes': '每 30 分钟',
    'stats.bucket.eachHour': '每小时',
    'stats.bucket.each6Hours': '每 6 小时',
    'stats.bucket.each12Hours': '每 12 小时',
    'stats.bucket.eachDay': '每天',
    'stats.title': '统计',
    'stats.subtitle': '选择时间范围与聚合粒度',
    'stats.settlementHour': '结算小时',
    'stats.trendTitle': '趋势',
    'stats.successFailureTitle': '成功/失败次数',
    'stats.errors.title': '错误原因分布',
    'stats.errors.scope.label': '失败范围',
    'stats.errors.scope.service': '服务端故障',
    'stats.errors.scope.client': '调用方错误',
    'stats.errors.scope.abort': '客户端中断',
    'stats.errors.scope.all': '全部失败',
    'stats.errors.summary.service': '服务端故障',
    'stats.errors.summary.client': '调用方错误',
    'stats.errors.summary.abort': '客户端中断',
    'stats.errors.summary.actionable': '可行动故障',
    'stats.errors.actionableRate': '可行动失败率：{{rate}}',
    'quota.title': '配额概览',
    'quota.subscription': '订阅：{{name}}',
    'quota.status.active': '正常使用',
    'quota.labels.usageRate': '使用率',
    'quota.labels.used': '已使用',
    'quota.labels.remaining': '剩余额度',
    'quota.labels.nextReset': '下次重置',
    'quota.status.expired': '已到期',
    'quota.status.expireInDays': '到期：剩余{{count}}天',
    'quota.status.expireInHours': '到期：剩余{{count}}小时',
    'quota.status.expireInMinutes': '到期：剩余{{count}}分钟',
    'quota.status.expireAt': '到期：{{time}}',
    'quota.status.expireUnknown': '到期：—',
    'live.summary.current': '当前窗口',
    'live.summary.30m': '30 分钟',
    'live.summary.1h': '1 小时',
    'live.summary.1d': '1 天',
    'live.summary.title': '实时统计',
    'live.chart.title': '实时图表',
    'live.window.label': '窗口大小',
    'live.option.records': '{{count}} 条记录',
    'live.latest.title': '最新记录',
    'metric.totalCount': '次数',
    'metric.totalCost': '金额',
    'metric.totalTokens': 'Tokens',
    'legend.low': '低',
    'legend.high': '高',
    'calendar.title': '使用活动',
    'calendar.metricsToggleAria': '统计指标切换',
    'calendar.valueSeparator': '：',
    'calendar.timeZoneLabel': '时区',
    'calendar.weekday.sun': '日',
    'calendar.weekday.mon': '一',
    'calendar.weekday.tue': '二',
    'calendar.weekday.wed': '三',
    'calendar.weekday.thu': '四',
    'calendar.weekday.fri': '五',
    'calendar.weekday.sat': '六',
    'calendar.monthLabel': '{{year}}年{{month}}月',
    'heatmap.title': '最近 7 天活动图',
    'heatmap24h.title': '最近 24 小时热点图（10 分钟）',
    'heatmap.metricsToggleAria': '指标切换',
    'heatmap.noData': '暂无数据',
    'table.loadError': '加载记录失败：{{error}}',
    'table.loadingRecordsAria': '正在加载记录',
    'table.noRecords': '暂无记录。',
    'table.column.time': '时间',
    'table.column.model': '模型',
    'table.column.status': '状态',
    'table.column.inputTokens': '输入',
    'table.column.outputTokens': '输出',
    'table.column.cacheInputTokens': '缓存输入',
    'table.column.totalTokens': '总 Tokens',
    'table.column.costUsd': '成本（美元）',
    'table.column.latency': '时延',
    'table.latency.firstByteTotal': '首字节 / 总耗时',
    'table.column.error': '错误',
    'table.status.success': '成功',
    'table.status.failed': '失败',
    'table.status.running': '运行中',
    'table.status.pending': '排队中',
    'table.status.unknown': '未知',
    'table.detailsTitle': '请求详情',
    'table.details.invokeId': '调用 ID',
    'table.details.source': '来源',
    'table.details.endpoint': '端点',
    'table.details.requesterIp': '请求方 IP',
    'table.details.codexSessionId': 'Codex Session ID',
    'table.details.failureKind': '失败分类',
    'table.details.timingsTitle': '阶段耗时',
    'table.details.stage.requestRead': '请求读取',
    'table.details.stage.requestParse': '请求解析',
    'table.details.stage.upstreamConnect': '上游连接',
    'table.details.stage.upstreamFirstByte': '上游首字节',
    'table.details.stage.upstreamStream': '上游流传输',
    'table.details.stage.responseParse': '响应解析',
    'table.details.stage.persistence': '持久化',
    'table.details.stage.total': '总耗时',
    'table.errorDetailsTitle': '错误详情',
    'table.errorDetailsEmpty': '暂无错误详情。',
    'stats.cards.loadError': '加载统计失败：{{error}}',
    'stats.cards.totalCalls': '调用总数',
    'stats.cards.success': '成功',
    'stats.cards.failures': '失败',
    'stats.cards.totalCost': '总成本',
    'stats.cards.totalTokens': '总 Tokens',
    'chart.loading': '加载中',
    'chart.loadingDetailed': '正在加载图表',
    'chart.noDataRange': '所选范围暂无数据。',
    'chart.noDataPoints': '暂无数据点。',
    'chart.totalTokens': '总 Tokens',
    'chart.totalCost': '成本（美元）',
    'chart.totalCount': '次数',
    'unit.calls': '次',
    'quota.status.expired.badge': '已到期',
  },
} as const

type BaseTranslations = typeof baseTranslations
type TranslationKey = keyof BaseTranslations['en']

export const translations: Record<Locale, Record<TranslationKey, string>> = baseTranslations

export type { TranslationKey }

export const FALLBACK_LOCALE: Locale = 'en'

export function formatTranslation(template: string, values?: TranslationValues) {
  if (!values) return template
  return template.replace(/\{\{\s*(\w+)\s*\}\}/g, (_, key: string) => {
    const value = values[key]
    return value === undefined || value === null ? '' : String(value)
  })
}
